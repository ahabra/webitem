<html>
  <head>
    <title>WebItem Visual Test</title>
  </head>

  <body>
    <h1>Visually testing WebItem</h1>
    <wi-t1></wi-t1>
    <wi-t2></wi-t2>
    <wi-t3>Make me italic</wi-t3>
    <wi-t5></wi-t5>
    <wi-t6></wi-t6>
    <wi-t7></wi-t7>
    <wi-t7></wi-t7>
    <wi-t8></wi-t8>


    <!-- JS code will be added to script element with 'data-app' attribute -->
    <script data-app></script>

    <script>
      const color1 = '#f8f8e6'
      const color2 = '#dcdcc6'
      const colors = ['Aqua', 'Beige', 'Blue', 'Cyan', 'Gold', 'Gray', 'Green', 'Orange', 'Red', 'Yellow']


      webitem.defineElement({
        nameWithDash: 'wi-t1',
        html: `
        <div style="background-color:${color1}">
          <h3>wi-t1 Simple Web Item</h3>
        </div>
        `
      })

      webitem.defineElement({
        nameWithDash: 'wi-t2',
        html: `
        <div style="background-color:${color2}">
          <h3>wi-t2 Web Item with CSS</h3>
          <h4>42</h4>
        </div>
        `,
        css: 'h4 { color: red; }'
      })

      webitem.defineElement({
        nameWithDash: 'wi-t3',
        html: el => {
          const h = el.innerHTML
          return `
            <div style="background-color:${color1}">
              <h3>wi-t3 Html Function</h3>
              <i>${h}</i>
            </div>
          `
        }
      })

      webitem.defineElement({
        nameWithDash: 'wi-t5',
        html: `
        <div style="background-color:${color2}">
          <h3>wi-t5 - Bound Properties</h3>
          In the browser's console, inspect <b><code>$('wi-t5').properties</code></b>
          <p>Country: <input id="country" type="text"></p>
          <p>Capital: <input id="capital" type="text"></p>
        </div>
        `,
        propertyList: [
          {name: 'country', value:'Syria', sel: '#country'},
          {name: 'capital', value:'Damascuss', sel:'#capital'},
          {name: 'style', value:'color:green', sel:'h3', attr:'style'}
        ]
      })

      webitem.defineElement({
        nameWithDash: 'wi-t6',
        html: `
          <div style="background-color:${color1}">
            <h3>wi-t6 - Events</h3>
            <button>Click Me</button>
            <span id="counter">0<span>
          </div>
          `,
        propertyList: [
          {name: 'counter', value: '0', sel:'#counter'}
        ],
        eventHandlerList: [
          {
            sel: 'button',
            eventName: 'click',
            listener: (ev, el) => {
              const counter = parseInt(el.properties.counter, 10)
              el.properties.counter = counter + 1
            }
          }
        ]

      })

      webitem.defineElement({
        nameWithDash: 'wi-t7',
        html: `
        <div style="background-color:${color2}">
          <h3>wi-t7 Web Item with display = inline-block</h3>
          Using display attribute
        </div>
        `,
        display: 'inline-block'
      })

      webitem.defineElement({
        nameWithDash: 'wi-t8',
        html: `
        <div style="background-color:${color1}">
          <h3>wi-t8 - Actions</h3>
          <button>Click Me</button>
        </div>
        `,
        propertyList: [
          {name: 'color', value: 'green', sel:'button', attr: 'style'}
        ],
        eventHandlerList: [
          {
            sel: 'button',
            eventName: 'click',
            listener: (ev, el) => {
              el.actions.updateColor(el)
            }
          }
        ],
        actionList:[
          {name: 'updateColor', action: function(el) {
            if (el !== this) {
              console.warn(`Warning: 'this' should be equal to 'el'`)
            }
            const index = Math.floor(Math.random() * colors.length)
            el.properties.color = `background-color:${colors[index]}`
          }}
        ]

      })

    </script>
  </body>
</html>
// webitem.js Library to simplify creating HTML5 Custom Elements
// https://github.com/ahabra/webitem
// Copyright 2021 (C) Abdul Habra. Version 0.3.1.
// Apache License Version 2.0


var webitem=(()=>{var b=Object.defineProperty;var _=e=>b(e,"__esModule",{value:!0});var F=(e,t)=>{_(e);for(var n in t)b(e,n,{get:t[n],enumerable:!0})};var Ae={};F(Ae,{defineElement:()=>H});var k=Object.defineProperty,d=(e,t)=>{for(var n in t)k(e,n,{get:t[n],enumerable:!0})},f={};d(f,{add:()=>J,all:()=>w,classPresentIf:()=>U,createElement:()=>G,createElements:()=>A,first:()=>I,getAttributes:()=>z,id:()=>B,removeElements:()=>Q,setContent:()=>K,tag:()=>O});var m={};d(m,{equals:()=>x,forEachEntry:()=>y,has:()=>Z,isDate:()=>g,isFunction:()=>Y,isNil:()=>X,isString:()=>h});function X(e){return e==null}function h(e){return p(e,"String")}function Y(e){return p(e,"Function")}function g(e){return p(e,"Date")}function p(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function y(e,t){if(!(!e||!t)){if(Array.isArray(e)){e.forEach((n,r)=>{t(r,n)});return}Object.entries(e).forEach(n=>t(n[0],n[1]))}}function Z(e,t){return!e||!t?!1:Object.prototype.hasOwnProperty.call(e,t)}function x(e,t){return e===t?!0:e===void 0||t===void 0?!1:ee(e,t)}function ee(e,t){return C(e)||C(t)?e===t:te(e,t)}var ne=new Set(["boolean","number","bigint","string","symbol"]);function C(e){return ne.has(typeof e)}function te(e,t){return re(e,t)?ie(e,t)?!0:ue(e,t):!1}function re(e,t){return L(e)===L(t)}function L(e){return Object.prototype.toString.call(e)}function ie(e,t){return g(e)&&g(t)?e.getTime()===t.getTime():!1}function ue(e,t){let n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(r=>x(e[r],t[r]))}function B(e,t=document){return E(t)&&(t=t.shadowRoot),t.getElementById(e)}function w(e,t=document){return E(t)&&(t=t.shadowRoot),Array.from(t.querySelectorAll(e))}function I(e,t=document){if(E(t)&&(t=t.shadowRoot),!e.includes("/"))return t.querySelector(e);let n=e.split("/").map(r=>r.trim()).filter(r=>r.length>0);for(let r of n)if(t=oe(r,t),t===null)break;return t}function oe(e,t){return e==="shadowRoot"||e==="shadow-root"?t.shadowRoot:t.querySelector(e)}function E(e){return e&&e.shadowRoot&&e.tagName.includes("-")}function z(e){let t={},n=e.attributes;if(!n||n.length===0)return t;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.value}return t}function A(e=""){if(e=e.trim(),!e)return[];let t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.childNodes)}function G(e,t={},n=""){let r=O(e,t,n),i=A(r);return i.length===0?null:i[0]}function O(e,t={},n=""){if(!e)return"";let r=se(t);return`<${e}${r}>${n}</${e}>`}function se(e){let t=[];return y(e,(r,i)=>{t.push(`${r}="${i}"`)}),(t.length>0?" ":"")+t.join(" ")}var fe=new Set(["beforebegin","afterbegin","beforeend","afterend"]);function J(e,t,n="beforeend"){return n=n.toLowerCase(),fe.has(n)?(h(t)?e.insertAdjacentHTML(n,t):ce(e,t,n),!0):!1}function ce(e,t,n){Array.isArray(t)?t.forEach(r=>e.insertAdjacentElement(n,r)):e.insertAdjacentElement(n,t)}function K(e,...t){e.innerHTML="",e.append(...t)}function Q(e,t=document){w(e,t).forEach(r=>{r.parentNode.removeChild(r)})}function U(e,t,n){let r=n?"add":"remove";e.classList[r](t)}var c={};d(c,{endsWith:()=>q,indexOf:()=>v,indexOfFirstMatch:()=>ae,indexOfLastMatch:()=>le,isEmpty:()=>R,removePrefix:()=>P,removeSuffix:()=>$,removeSurrounding:()=>de,replaceTemplate:()=>ye,startsWith:()=>T,substringAfter:()=>me,substringBefore:()=>he,trim:()=>ge});function v(e,t,n=0,r=!1){return e?r?e.toLowerCase().indexOf(t.toLowerCase(),n):e.indexOf(t,n):-1}function ae(e,t){return!t||!e?-1:e.split("").findIndex(t)}function le(e,t){if(!t||!e)return-1;let n=e.split("");for(let r=n.length;r>=0;--r)if(t(n[r],r))return r;return-1}function T(e="",t=void 0,n=!1){if(n){let r=e.substring(0,t.length).toLowerCase();return t.toLowerCase()===r}return e.startsWith(t)}function q(e,t,n=!1){return n?e.toLowerCase().endsWith(t.toLowerCase()):e.endsWith(t)}function P(e,t,n=!1){return T(e,t,n)&&(e=e.substring(t.length)),e}function $(e,t,n=!1){return q(e,t,n)&&(e=e.substring(0,e.length-t.length)),e}function de(e,t,n,r=!1){return $(P(e,t,r),n,r)}function me(e,t,n=!1){if(!t)return e;let r=v(e,t,0,n);return r<0?"":e.substring(r+t.length)}function he(e,t,n=!1){if(!t)return"";let r=v(e,t,0,n);return r<0?e:e.substring(0,r)}function ge(e){return R(e)?"":(h(e)||(e=String(e)),e.trim(e))}function R(e){return e==null||e===""}function ye(e="",t={},n="${",r="}"){return y(t,(i,u)=>{u!==void 0&&(i=n+i+r,e=e.replaceAll(i,u))}),e}function S({obj:e,prop:t,sel:n,attr:r,root:i,onChange:u}){Ee(t),e=e||{};let o=e.hasOwnProperty(t)?e[t]:void 0;i=i||document;let s={};return Object.defineProperty(e,t,{get:()=>j({prop:t,sel:n,attr:r,root:i,objNotBound:s}),set:V=>pe({prop:t,value:V,root:i,sel:n,attr:r,objNotBound:s,onChange:u}),configurable:!0,enumerable:!0}),o!==void 0&&(console.info(`Property '${t}' already exists in object. Will override previous definition but retain old value of ${o}.`),e[t]=o),e}var a=e=>e.type==="checkbox",l=e=>e.type==="radio",M=e=>e.tagName.toLowerCase()==="select",N=e=>"value"in e,W=e=>new Set(Array.isArray(e)?e:[e]);function pe({prop:e,value:t,root:n,sel:r,attr:i,objNotBound:u,onChange:o}){if(ve({prop:e,value:t,root:n,sel:r,attr:i,objNotBound:u,onChange:o}),r){Se(n,r,t,i);return}u[e]=t}function ve({prop:e,value:t,root:n,sel:r,attr:i,objNotBound:u,onChange:o}){if(!o)return;let s=j({prop:e,root:n,sel:r,attr:i,objNotBound:u});s!==t&&o(s,t)}function j({prop:e,root:t,sel:n,attr:r,objNotBound:i}){return n?be(t,n,r):i[e]}function be(e,t,n){let r=D(e,t);if(r.length===0)return null;let i=r[0];return n?i.getAttribute(n):N(i)?a(i)?r.filter(u=>a(u)&&u.checked).map(u=>u.value==="on"?u.name:u.value):M(i)?[...i.querySelectorAll("option")].filter(o=>o.selected).map(o=>o.value):(l(i)&&(i=r.filter(l).find(u=>u.checked)),i.value):i.innerHTML}function Se(e,t,n,r){let i=D(e,t);if(i.length===0)return;let u=i[0];if(a(u)){let o=W(n);i.filter(a).forEach(s=>s.checked=o.has(s.value)||o.has(s.name));return}if(M(u)){let o=W(n);u.querySelectorAll("option").forEach(s=>s.selected=o.has(s.value));return}if(l(u)){i.filter(l).forEach(o=>o.checked=o.value===n);return}i.forEach(o=>we(o,n,r))}function we(e,t,n){n?e.setAttribute(n,t):N(e)?e.value=t:e.innerHTML=t}function D(e,t){let n=e.querySelectorAll(t);return n.length===0&&console.warn(`No elements found matching selector ${t}`),[...n]}function Ee(e){if(typeof e!="string"||e.length===0)throw"'prop' argument must be a String defining the name a property."}function H({nameWithDash:e,html:t,css:n,display:r,propertyList:i,actionList:u,eventHandlerList:o}){if(customElements.get(e))return!1;let s=class extends HTMLElement{constructor(){super();Le(this,t,n,r),this.properties=Oe(this,i),this.actions=xe(this,u),Ce(this,o)}};return customElements.define(e,s),!0}function Oe(e,t){let n={};return qe(t)&&t.forEach(r=>Te(n,r,e)),n}function Te(e,t,n){let r=Pe(t,n);S({obj:e,prop:t.name,sel:t.sel,attr:t.attr,root:n.shadowRoot,onChange:r}),e[t.name]=t.value}function Pe(e,t){if(!!e.onChange)return(n,r)=>e.onChange(t,n,r)}function qe(e){if(!e)return!1;if(!Array.isArray(e))throw"propertyList must be an array of {name, value, [sel], [attr]} objects";return!0}function xe(e,t){let n={};return t&&t.forEach(r=>{r.name&&r.action&&(n[r.name]=r.action.bind(e))}),n}function Ce(e,t){if(!!t){if(!Array.isArray(t))throw"eventHandlerList must be an array of {sel, eventName, listener} objects";t.forEach(n=>{f.all(n.sel,e.shadowRoot).forEach(i=>{i.addEventListener(n.eventName,u=>{n.listener(u,e)})})})}}function Le(e,t,n,r){t=$e(e,t);let i=e.attachShadow({mode:"open"}),u=f.createElements(Re(n,r)+t);i.append(...u)}function $e(e,t){return m.isFunction(t)?t(e):t}function Re(e,t){return Me(t)+je(e)}function je(e){return e=c.trim(e),e.length===0?"":(c.startsWith(e,"<style>",!1)||(e=f.tag("style",{},e)),e)}function Me(e){return e=c.trim(e),e.length===0?"":`
  <style>
    :host { display: ${e};}
    :host([hidden]) {display: none;}
  </style>
  `}return Ae;})();
